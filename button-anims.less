// variables

@bg-color: #333;
@bg-color-focus: darken(@bg-color, 20%);
@color: #fff;
@padding: 1em;
@font-size: 1em;

// Generic mixins

.transition(@transition) {
    -webkit-transition:     @transition;
    -moz-transition:        @transition;
    -ms-transition:         @transition;
    -o-transition:          @transition;
    transition:             @transition;
}

.transform(@string){
    -webkit-transform:      @string;
    -moz-transform:         @string;
    -ms-transform:          @string;
    -o-transform:           @string;
    transform:              @string;
}

.backface-visiblity(@visibility: hidden) {
    backface-visiblity:         @visibility;
    -webkit-backface-visibility:@visibility;
}

.transform-origin(@x:center, @y:center) {
    -webkit-transform-origin: @x @y;
    -moz-transform-origin:    @x @y;
    -ms-transform-origin:     @x @y;
    -o-transform-origin:      @x @y;
    transform-origin:         @x @y;
}

.animation(@animation) {
    -webkit-animation:      @animation;
    -moz-animation:         @animation;
    -ms-animation:          @animation;
    animation:              @animation;
}

.button-style() {
    .transition(all 0.2s ease);
    border-radius: 3px;
    overflow: hidden;
    color: @color;
    display: inline-block;
    padding: @padding @padding*2;
    position: relative;
    font-size: @font-size;
    cursor: pointer;
    text-decoration: none;
    background-color: @bg-color;
    color: @color;
    border: 0;

    &:hover,
    &:focus {
        outline: none;
        text-decoration: none;
        background-color: @bg-color-focus;
    }
}

.button-icon() {
    padding: @padding @padding*2;

    &:before,
    &:after {
        .transition(all 0.4s ease);
        position: absolute;
        right: @padding/2;
        top: @padding;
        display: inline-block;
        font-size: @font-size;
        color: @bg-color;
    }

    &:before {
        right: auto;
        left: @padding/2;
    }

    &:hover,
    &:focus {
        &:before,
        &:after {
            color: @color;
        }
    }
}

// animations

@-webkit-keyframes blink {
    1%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

@keyframes blink {
    0%, 50% { opacity: 0; }
    51%, 100% { opacity: 1; }
}

// Button specific mixins
.button-reply() {
    .button-icon();

    &:after {
        content: "\21B5";
        .transform(rotate(-90deg));
    }

    &:hover,
    &:focus {
        &:after {
            .transform(rotate(0deg));
        }
    }
}

.button-download() {
    .button-icon();

    &:after {
        content: "\2192";
    }

    &:hover,
    &:focus {
        &:after {
            .transform(rotate(90deg));
            border-right: 1px solid #fff;
        }
    }
}

.button-external() {
    .button-icon();

    &:after {
        content: "\2192";
    }

    &:hover,
    &:focus {
        &:after {
            .transform(rotate(-45deg));
        }
    }
}

.button-submit() {
    .button-icon();

    &:after {
        content: "\00BB";
        .transform(translateX(-0.2em) translateY(-0.1em) scale(1.4));
    }

    &:hover,
    &:focus {
        &:after {
            .transform(translateX(0em) translateY(-0.1em) scale(1.4));
        }
    }
}

.button-code() {
    .button-icon();

    &:before {
        left: auto;
        right: @padding;
        content: "\003E";
    }

    &:after {
        right: @padding/2;
        .transition(none);
        content: "\005F";
    }

    &:hover,
    &:focus {
        &:after {
            .animation(blink 1s infinite normal linear);
        }
    }
}

.button-tick() {
    .button-icon();

    &:after {
        content: "\2713";
        .transform(rotatey(90deg));
    }

    &:hover,
    &:focus {
        &:after {
            .transform(rotatey(0deg));
        }
    }
}

.button-cross() {
    .button-icon();

    &:after {
        content: "\2717";
        .transform(rotatey(90deg));
    }

    &:hover,
    &:focus {
        &:after {
            .transform(rotatey(0deg));
        }
    }
}

.button-close() {
    .button-icon();

    &:after {
        content: "x";
        .transform(rotatex(90deg));
    }

    &:hover,
    &:focus {
        &:after {
            .transform(rotatex(0deg));
        }
    }
}

.button-email() {
    .button-icon();

    &:after {
        content: "\0040";
        .transform(rotatez(90deg));
    }

    &:hover,
    &:focus {
        &:after {
            .transform(rotatez(0deg));
        }
    }
}

.button-comment() {
    .button-icon();

    &:after {
        content: "\2026";
        .transform(translateX(@padding*2));
    }

    &:hover,
    &:focus {
        &:after {
            .transform(translateX(0));
        }
    }
}

.button-quote() {
    .button-icon();

    &:before {
        left: @padding;
        content: "\201C";
        .transform(translateX(-@padding*2));
    }

    &:after {
        right: @padding;
        content: "\201D";
        .transform(translateX(@padding*2));
    }

    &:hover,
    &:focus {
        &:before {
            .transform(translateX(0));
        }

        &:after {
            .transform(translateX(0));
        }
    }
}

.button-question() {
    .button-icon();

    &:after {
        content: "\003F";
        right: @padding;
        .transform(rotateZ(360deg));
    }

    &:hover,
    &:focus {
        &:after {
            .transform(rotateZ(0deg));
        }
    }
}

.button-star() {
    .button-icon();

    &:after {
        content: "\2605";
        font-size: 0.95em;
        .transform(rotateZ(45deg));
    }

    &:hover,
    &:focus {
        &:after {
            .transform(rotateZ(0));
        }
    }
}

.button-search() {
    .button-icon();

    &:after {
        content: "\26B2";
        top: 0.3em;
        font-size: @font-size*1.5;
        .transform(rotateZ(-90deg));
        .backface-visiblity();
    }

    &:hover,
    &:focus {
        &:after {
            .transform(rotateZ(-45deg));
        }
    }
}

// Output css

a,
button {
    &:hover {
        text-decoration: underline;
    }

    &:focus {
        text-decoration: underline;
        outline: 1px solid @bg-color;
    }

    &.btn {
        .button-style();
    }

    &.btn-block {
        width: 100%;
        display: block;
        text-align: center;
    }

    &.btn-reply {
        .button-reply();
    }

    &.btn-download {
        .button-download();
    }

    &.btn-external {
        .button-external();
    }

    &.btn-submit {
        .button-submit();
    }

    &.btn-code {
        .button-code();
    }

    &.btn-tick {
        .button-tick();
    }

    &.btn-cross {
        .button-cross();
    }

    &.btn-close {
        .button-close();
    }

    &.btn-email {
        .button-email();
    }

    &.btn-comment {
        .button-comment();
    }

    &.btn-quote {
        .button-quote();
    }

    &.btn-question {
        .button-question();
    }

    &.btn-star {
        .button-star();
    }

    &.btn-search {
        .button-search();
    }
}
